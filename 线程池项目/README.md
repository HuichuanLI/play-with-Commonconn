# 线程池项目

## 背景
作为五大池之一(内存池、连接池、线程池、进程池、协程池)，线程池的应用非常广泛，不管是客户
端程序，还是后台服务程序，都是提高业务处理能力的必备模块。有很多开源的线程池实现，虽然各自
接口使用上稍有区别，但是其核心实现原理都是基本相同的。


## 并发和并行
- CPU单核 CPU多核、多CPU
- 并发 ：单核上，多个线程占用不同的CPU时间片，物理上还是串行执行的，但是由于每个线程占用的CPU时间 片非常短(比如10ms)，看起来就像是多个线程都在共同执行一样，这样的场景称作并发 (concurrent)。
- 并行：在多核或者多CPU上，多个线程是在真正的同时执行，这样的场景称作并行(parallel)。

## 多线程的优势
#### IO密集型：无论是CPU单核、CPU多核、多CPU，都是比较适合多线程程序的
#### CPU密集型：多线程存在上下文切换，是额外的花销，线程越多上下文切换所花费的额外时间也越多，倒不如一个线程一直进计算；多个线程可以并行执行，对CPU利用率好。


## 线程池的优势
操作系统上创建线程和销毁线程都是很"重"的操作，耗时耗性能都比较多，那么在服务执行的过程中， 如果业务量比较大，实时的去创建线程、执行业务、业务完成后销毁线程，那么会导致系统的实时性能 降低，业务的处理能力也会降低。
线程池的优势就是(每个池都有自己的优势)，在服务进程启动之初，就事先创建好线程池里面的线 程，当业务流量到来时需要分配线程，直接从线程池中获取一个空闲线程执行task任务即可，task执行 完成后，也不用释放线程，而是把线程归还到线程池中继续给后续的task提供服务。

- fixed模式线程池：线程池里面的线程个数是固定不变的，一般是ThreadPool创建时根据当前机器的CPU核心数量进行指
定。
- cached模式线程池 ：线程池里面的线程个数是可动态增长的，根据任务的数量动态的增加线程的数量，但是会设置一个线程 数量的阈值(线程过多的坏处上面已经讲过了)，任务处理完成，如果动态增长的线程空闲了60s还没 有处理其它任务，那么关闭线程，保持池中最初数量的线程即可。
